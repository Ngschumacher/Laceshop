@using Laceshop.Models.Products
@using Laceshop.Website.Code.Controllers.Basket
@using Laceshop.Website.Code.Models.Products
@model  Laceshop.Website.Code.Controllers.Products.ProductsViewModel
@{
    Layout = "Shared/_Layout.cshtml";
}
@Model.Name

@*  for this page, get all visible children in Umbraco content tree *@

@foreach (ProductPageTeaser contentProduct in Model.Products)
{
    //@GetProductInfo(contentProduct)

    // info from Umbraco
    var contentidForChildPage = contentProduct.Id;


    // build model to hand to controller used in BuyButton.cshtml
    var productitemmodel = new AddItemModel()

    {
        ProductKey = contentProduct.ProductDetail.Key,

        ContentId = contentidForChildPage
    };

    @contentProduct.Name

    @contentProduct.ProductDescription

    @contentProduct.ProductDetail.Price.ToString("C")

	@Html.Action("Display_BuyButton", "BasketPage", new { area = "MerchelloProductListExample", product = productitemmodel })
}

